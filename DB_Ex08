CREATE TABLE SIM_USER(
	NAME VARCHAR2(20) CONSTRAINTS NA_NN NOT NULL,
	PW VARCHAR2(20)  CONSTRAINTS  PW_NN NOT NULL,
	PH VARCHAR2(20)  CONSTRAINTS  PH_NN NOT NULL,
	ID_NO NUMBER(10)  CONSTRAINTS ID_PK PRIMARY KEY,
	ADDRESS VARCHAR2(20) ,
	Brith DATE DEFAULT(sysdate) ,
	COUNT_SIM VARCHAR2(10) );
--SIM_SQ.nextval 
CREATE SEQUENCE SIM_SQ;

DROP TABLE SIM_USER;

--30번 부서  의 가장 최근 고용한 직원보다 이후에 고용된 직원 

SELECT * FROM EMP WHERE SAL <(SELECT MIN(SAL) 
FROM EMP WHERE DEPTNO=30);

SELECT * FROM EMP WHERE SAL < ALL(SELECT SAL FROM EMP 
WHERE DEPTNO =30
);
--ALL  
SELECT * FROM EMP WHERE SAL > (SELECT MIN(SAL) FROM EMP 
WHERE DEPTNO =30
);
SELECT * FROM EMP WHERE SAL > ANY(SELECT SAL 
FROM EMP WHERE DEPTNO=30);

SELECT * FROM EMP WHERE JOB IN (SELECT JOB FROM EMP 
WHERE DEPTNO =30
);

SELECT * FROM EMP WHERE (SAL,DEPTNO) NOT IN(SELECT MAX(SAL
), DEPTNO  FROM EMP
GROUP BY DEPTNO);

SELECT * FROM EMP WHERE NOT EXISTS 
(SELECT * FROM EMP WHERE DEPTNO=40);

SELECT E.EMPNO, E.ENAME,D.DNAME FROM (SELECT *FROM EMP WHERE DEPTNO IN(10,20)) E,
(SELECT *FROM DEPT) D 
WHERE E.DEPTNO =D.DEPTNO ;


WITH
E AS (SELECT *FROM EMP WHERE DEPTNO IN(10,20)),
D AS (SELECT *FROM DEPT) 
SELECT E.EMPNO, E.ENAME,D.DNAME
WHERE E.DEPTNO =D.DEPTNO ;

SELECT E.* ,(SELECT D.DNAME || ':' || D.LOC
FROM DEPT D WHERE D.DEPTNO= E.DEPTNO) DNAME  FROM EMP E ;

-- 상호연관 서브 쿼리 


-- 상관 부속? 
--부속질의 서브 쿼리 
SELECT (SELECT * FROM emp), EName FROM emp;

--스칼리 부속질의 
--인라인뷰 
--상관부속 질의 

--스칼라= 단일값 
--비교 연산 
--< 
-- =
--> all any some 


--인라인부  인라인 안에 인ㄹ하인 
-- 주질의 결과 부질의 조건을 사용 


--30번부서에 근무하는 사원 중에서 +& 20 

SELECT  * FROM emp WHERE DEPTNO =30 AND job IS NULL;


SELECT DISTINCT E.ENAME, E.JOB FROM EMP E
WHERE E.DEPTNO = 10
AND E.JOB NOT IN (
    SELECT  J.JOB
    FROM EMP J
    WHERE J.DEPTNO = 20
);


--10번 부서에서 근무하느 직원들중에서 20번 부서에 존재하지않는 직책 JOB 을 가진 직원을 조회

SELECT *
FROM EMP
WHERE JOB = (SELECT JOB FROM EMP WHERE ENAME = 'SCOTT');
--전채사원중에서 SCOTT 과 같은 직책을 가지고 있는 사람을 조회

SELECT *FROM SIM_USER su 



































