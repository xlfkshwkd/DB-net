CREATE TABLE DEPT_SEQUENCE AS SELECT * FROM DEPT WHERE 1<>1;

SELECT *FROM DEPT_SEQUENCE;

CREATE SEQUENCE SEQ_DEPT_SEQUENCE 
	INCREMENT BY 10 
	START WITH 10 
	MAXVALUE 90 
	MINVALUE 0 
	NOCYCLE
	CACHE 2;
--NOCYCLE 사이클 돌려~ CYCLE


ALTER SEQUENCE SEQ_DEPT_SEQUENCE 
	CYCLE;

INSERT INTO DEPT_SEQUENCE  
VALUES(SEQ_DEPT_SEQUENCE.nextval,'DEPT1','INCHEON');

SELECT  *FROM USER_SEQUENCES;

DROP SEQUENCE SEQ_DEPT_SEQUENCE ;


CREATE SEQUENCE SEQ_DEPT_SEQUENCE ;

SELECT SEQ_DEPT_SEQUENCE.nextval, SEQ_DEPT_SEQUENCE.currval FROM DUAL;


--CREATE SYNONYM: 현재 사용자의 스키마에서 조회가능한 동의어 
--CREATE PUBLIC SYNONYM: 모든사용자의 스키마에서 조회가능한 동의어 


SELECT  *FROM EMP;
SELECT  *FROM DEPT;

SELECT E.EMPNO ,E.DEPTNO  ,E.ENAME, D.DNAME
FROM EMP E, DEPT D WHERE E.DEPTNO =D.DEPTNO ;

 
--후보키 각행을 대표할수있는 컬럼 또는 컬럼의 조합 - 주민번호 회원명+ 이메일, 회원명 + 휴대전화 번호 
--기본키 후보키중 원하는거 선택 기본키임 프라이머리 키 대신할수있는키 중복안됨(유니크 +NOT NULL)
--대리키 : 기본키로 사용하기 적합한 컬럼이 없을 경우 증감번호형식의 대리키를 사용  
--외래키 : 다른 테이블의 기본키를 참조하는 키 -> 제약조건 참조 무결성제약조건 

--CHECK 조건 통제 NOT NULL;

CREATE TABLE HAHA(
	USER_ID VARCHAR(20) CONSTRAINT MB_ID_NN NOT NULL,
	USER_PW VARCHAR(30)CONSTRAINT MB_PW_NN NOT NULL,
	USER_NAME VARCHAR(30) CONSTRAINT MB_NAME_NN NOT NULL,
	MOBLIE VARCHAR(30) ,

);


--테이블약자 컬럼약자 이름약자 
DROP TABLE HAHA;
INSERT INTO HAHA VALUES('SIN','SIM12','심','');

INSERT INTO HAHA VALUES('UESR01','12345','나는누굴까','');

INSERT INTO HAHA VALUES('SIN','SIM12','심','');

SELECT * FROM HAHA;
DROP TABLE HAHA;
SELECT * FROM USER_CONSTRAINTS WHERE TABLE_NAME ='HAHA';
--이름을 정할때는 아시죠? 제약조건 붙히고 이름을 만듬 

SELECT * FROM USER_CONS_COLUMNS WHERE TABLE_NAME ='HAHA';


ALTER TABLE HAHA MODIFY MOBLIE CONSTRAINT MB_MOBLIE_NN NOT NULL;
--제약조건 생성 
UPDATE HAHA SET MOBLIE='01000000000' WHERE USER_ID ='UESR01';

UPDATE HAHA SET MOBLIE='01000000000' WHERE USER_ID ='SIN';


ALTER TABLE HAHA  DROP CONSTRAINT MB_MOBLIE_NN;
--제약조건 삭제 
INSERT INTO HAHA VALUES('이름','비번','ㅋㅋ','');

--유니크 제약조건 넣기 
CREATE TABLE HAHA(
	USER_ID VARCHAR2(20) CONSTRAINT MB_ID_NN UNIQUE,
	USER_PW VARCHAR2(30)CONSTRAINT MB_PW_NN NOT NULL,
	USER_NAME VARCHAR2(30) CONSTRAINT MB_NAME_NN NOT NULL,
	MOBLIE VARCHAR2(30) 

);


SELECT * FROM USER_CONS_COLUMNS WHERE TABLE_NAME ='HAHA';
--제약조건 구경 
INSERT INTO HAHA VALUES('USER01','123456','01','');

-- 유니크는 값 중복허용안하지만 널값은 중복이됨 아오 

INSERT INTO HAHA VALUES('','123456','01','');

ALTER TABLE HAHA MODIFY MOBLIE CONSTRAINT MB_MOBLIE_UQ UNIQUE;


ALTER TABLE HAHA MODIFY USER_ID CONSTRAINT MB_ID_NN PRIMARY KEY;

--시험 문제 
CREATE TABLE HAHA(
	USER_ID VARCHAR2(20) CONSTRAINT PK_ID PRIMARY KEY,
	USER_PW VARCHAR2(20)CONSTRAINT MB_PW_NN NOT NULL,
	USER_NAME VARCHAR2(30) CONSTRAINT MB_NM_NN NOT NULL,
	MOBLIE VARCHAR2(30) 

);
--. 프리미멀키 넣기 
INSERT INTO HAHA (USER_ID,USER_PW,USER_NAME)VALUES('심','123456','01');


SELECT *FROM HAHA;
DROP TABLE HAHA;
--대리키 시퀀스 키 DEFAULT '기본값 '

-- 날자를 비워넣으면 오늘날짜를 넣음 



CREATE TABLE HAHA(
	USER_NO NUMBER(11) CONSTRAINT PK_MB PRIMARY KEY,
	USER_ID VARCHAR2(20) CONSTRAINT MB_ID_NN UNIQUE NOT NULL,
	USER_PW VARCHAR2(65) CONSTRAINT MB_PW_NN NOT NULL,
	USER_NM VARCHAR2(30) CONSTRAINT MB_NM_NN NOT NULL,
	EMAIL  VARCHAR2(60) CONSTRAINT MB_EMAIL_NN NOT NULL,
	MOBLIE VARCHAR2(30),
	RGE_DT DATE DEFAULT SYSDATE 

);

CREATE SEQUENCE SEQ_HAHA;


SELECT * FROM USER_CONS_COLUMNS WHERE TABLE_NAME ='HAHA';


INSERT INTO HAHA (USER_NO,USER_ID,USER_PW,USER_NM,EMAIL)
VALUES(1,'SIM','123456','USER01','XLFKSHWKD@NAVER.COM');




CREATE TABLE HAHA_UNIQUE(
	COL1 VARCHAR2(20),
	COL2 VARCHAR2(20),
	COL3 VARCHAR2(20),
	CONSTRAINT TBUNI_UQ UNIQUE(COL1,COL2)
	

);

INSERT INTO HAHA_UNIQUE Values('a1','b2','c1');

SELECT *FROM HAHA_UNIQUE;






CREATE TABLE HAHA_PK(
	COL1 VARCHAR2(20),
	COL2 VARCHAR2(20),
	COL3 VARCHAR2(20),
	CONSTRAINT TBUNI_PK PRIMARY KEY(COL1,COL2)
	

);

INSERT INTO HAHA_PK Values('a1','b2','c1');






























